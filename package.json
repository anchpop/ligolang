{
  "name": "ligo",
  "esy": {
    "build": "dune build -p #{self.name}",
    "release": {
      "bin": [
        "ligo"
      ],
      "includePackages": [
        "root",
        "@opam/hacl-star-raw",
        "@opam/conf-libev",
        "@opam/conf-libffi",
        "@opam/conf-gmp"
      ],
      "rewritePrefix": true
    },
    "buildEnv": {
      "OPAM_SWITCH_PREFIX": "#{ @opam/tezos-rust-libs.install }"
    }
  },
  "exportedEnv": {
    "DYLD_LIBRARY_PATH": {
      "val": "#{@opam/hacl-star-raw.lib / 'hacl-star-raw' : $DYLD_LIBRARY_PATH}",
      "scope": "global"
    }
  },
  "license": "MIT",
  "scripts": {
    "test": "dune build -w @runtest --no-buffer",
    "lvmtest": "dune build @lambda_vm_test -w --no-buffer",
    "format": "dune build @fmt --auto-promote"
  },
  "dependencies": {
    "ocaml": "4.12.0",
    "@opam/dune": "2.9.1",
    "@opam/alcotest": "1.5.0",
    "@opam/alcotest-lwt": "1.5.0",
    "@opam/bisect_ppx": "2.7.0",
    "@opam/bls12-381-legacy": "0.4.3",
    "@opam/coq": "8.13.2",
    "@opam/core": "v0.14.1",
    "@opam/getopt": "20120615",
    "@opam/irmin": "2.8.0",
    "@opam/irmin-pack": "2.8.0",
    "@opam/linenoise": "1.3.1",
    "@opam/lwt": "5.4.2",
    "@opam/menhir": "20211128",
    "@opam/ocaml-migrate-parsetree": "2.3.0",
    "@opam/ocaml-recovery-parser": "0.2.3",
    "@opam/ocamlfind": "1.9.1",
    "@opam/ocamlgraph": "2.0.0",
    "@opam/odoc": "2.1.0",
    "@opam/pprint": "20211129",
    "@opam/ppx_deriving": "5.2.1",
    "@opam/ppx_deriving_yojson": "3.6.1",
    "@opam/ppx_expect": "v0.14.2",
    "@opam/ppx_inline_test": "v0.14.1",
    "@opam/ppx_import": "1.9.1",
    "@opam/qcheck": "0.18",
    "@opam/qcheck-alcotest": "0.18",
    "@opam/resto-cohttp-self-serving-client": "0.6.1",
    "@opam/ringo-lwt": "0.5",
    "@opam/terminal_size": "0.1.4",
    "@opam/tezos-base": "*",
    "@opam/tezos-clic": "*",
    "@opam/tezos-crypto": "*",
    "@opam/tezos-micheline": "*",
    "@opam/yojson": "1.7.0",
    "@opam/tezos-rust-libs": "*"
  },
  "devDependencies": {
    "@opam/ocaml-lsp-server": "*",
    "@opam/ocamlformat": "0.21.0"
  },
  "resolutions": {
    "@opam/ocaml-recovery-parser": "serokell/ocaml-recovery-parser:ocaml-recovery-parser.opam#06311c76959c8c9dc923623eb8ae606576a0c9cb",
    "@esy-ocaml/libffi": "ManasJayanth/esy-libffi:esy.json#41698aeda66c004df26c0c1d80a191503bada03d",
    "@opam/conf-libffi": {
      "source": "no-source:",
      "override": {
        "dependencies": {
          "@esy-ocaml/libffi": "*"
        }
      }
    },
    "yarn-pkg-config": "esy-ocaml/yarn-pkg-config#db3a0b63883606dd57c54a7158d560d6cba8cd79",
    "@opam/conduit-lwt-unix": "4.0.1",
    "@opam/hacl-star-raw": {
      "source": "https://github.com/project-everest/hacl-star/releases/download/ocaml-v0.4.3/hacl-star.0.4.3.tar.gz#sha512:bfb2ddf125a345deb361483aedf9d79837e9ee18b0bc31644588f8409a0fe0c50db2fc1e6b20a07e02fb9f393d2fc9968fd9d2aa9f506f4e23ca8b6ed4036870",
      "override": {
        "exportedEnv": {
          "DYLD_LIBRARY_PATH": {
            "scope": "global",
            "val": "#{self.lib / 'hacl-star-raw'}:$DYLD_LIBRARY_PATH"
          },
          "LD_LIBRARY_PATH": {
            "scope": "global",
            "val": "#{self.lib / 'hacl-star-raw'}:$LD_LIBRARY_PATH"
          }
        },
        "buildEnv": {
          "DYLD_LIBRARY_PATH": "#{@esy-ocaml/libffi.lib}:$DYLD_LIBRARY_PATH",
          "LD_LIBRARY_PATH": "#{@esy-ocaml/libffi.lib}:$LD_LIBRARY_PATH"
        },
        "dependencies": {
          "@opam/ctypes": "*",
          "@opam/ctypes-foreign": "*",
          "@opam/ocamlfind": "*",
          "@esy-ocaml/libffi": "*"
        },
        "buildsInSource": true,
        "build": [
          [
            "sh",
            "-exc",
            "cd raw && ./configure"
          ],
          [
            "make",
            "-C",
            "raw"
          ]
        ],
        "install": [
          [
            "make",
            "-C",
            "raw",
            "install-hacl-star-raw"
          ]
        ]
      }
    },
    "@opam/conf-rust": {
      "source": "no-source:",
      "override": {
        "build": [
          "true"
        ],
        "dependencies": {
          "esy-rustup": "*"
        }
      }
    },
    "@opam/bls12-381-unix": {
      "source": "https://gitlab.com/dannywillems/ocaml-bls12-381/-/archive/1.0.1/ocaml-bls12-381-1.0.1.tar.bz2#sha512:f69d611deb6132d07f0a8ecde7bb118f733de802e241056c5e2b194579c5723a12d58e93410bd56f68a608568de035b61f018d1fea52388f54875d77b8f386c2",
      "override": {
        "buildsInSource": "_build",
        "build": [
          [
            "dune",
            "build",
            "-j",
            "4",
            "-p",
            "bls12-381-unix",
            "@install"
          ]
        ],
        "install": [
          [
            "esy-installer",
            "bls12-381-unix.install"
          ]
        ],
        "buildEnvOverride": {
          "OPAM_SWITCH_PREFIX": "#{ @opam/tezos-rust-libs.install }"
        },
        "dependencies": {
          "@opam/conf-rust": "*",
          "@opam/dune": "*",
          "@opam/ff-sig": ">=0.6.1  < 0.7.0",
          "@opam/zarith": ">= 1.10  < 2.0",
          "@opam/ctypes": ">= 0.18.0  < 0.19.0",
          "@opam/ctypes-foreign": "*",
          "@opam/bls12-381-gen": "0.4.3",
          "@opam/bls12-381": "1.0.1",
          "@opam/hex": "*",
          "@opam/tezos-rust-libs": "1.1"
        }
      }
    },
    "@opam/bls12-381-legacy": {
      "source": "https://gitlab.com/dannywillems/ocaml-bls12-381/-/archive/0.4.3-legacy/ocaml-bls12-381-0.4.3-legacy.tar.bz2#sha512:0102db9dcab07c788291e9f799a4cf7a480716f18da6833587381e88ecc699d6e6bb0f44afef0ec7cd14a742d8ec6efc7900b45b0bcdeba409a89420465c0a25",
      "override": {
        "buildsInSource": "_build",
        "build": [
          [
            "dune",
            "build",
            "-j",
            "4",
            "-p",
            "bls12-381-legacy",
            "@install"
          ]
        ],
        "install": [
          [
            "esy-installer",
            "bls12-381-legacy.install"
          ]
        ],
        "buildEnvOverride": {
          "OPAM_SWITCH_PREFIX": "#{ @opam/tezos-rust-libs.install }"
        },
        "dependencies": {
          "@opam/conf-rust": "*",
          "@opam/dune": "*",
          "@opam/ff-sig": ">=0.6.1  < 0.7.0",
          "@opam/zarith": ">= 1.10  < 2.0",
          "@opam/ctypes": ">= 0.18.0  < 0.19.0",
          "@opam/ctypes-foreign": "*",
          "@opam/bls12-381-gen": "0.4.3",
          "@opam/tezos-rust-libs": "1.1"
        }
      }
    },
    "esy-rustup": "ManasJayanth/esy-rustup:esy.json#e07d864138ed41c5a151a4065063521d0588eb2a"
  }
}
